<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8'>
        <meta http-equiv='X-UA-Compatible' content='IE=edge'>
        <title>Page Title</title>
        <meta name='viewport' content='width=device-width, initial-scale=1'>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css" integrity="sha512-jnSuA4Ss2PkkikSOLtYs8BlYIeeIK1h99ty4YfvRPAlzr377vr3CXDb7sb7eEEBYjDtcYj+AjBH3FLv5uSJuXg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <style>
           .layer {
            position: fixed;
            width: 100%;
            height: 100%;
            background: #0005 url(https://i.gifer.com/ZKZg.gif) no-repeat center;
            background-size: 60px;
            top: 0;
            left: 0;
           }
           .layer.hide {display: none;}
        </style>
        <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.7.1.min.js"></script>
        <script>
            $(function() {
                let counter = 1;

                // 한 번에 50개씩 로드
                function callList() {
                    let str = '';
                    for(let i = 0; i < 50; i++) {
                        str += 
                    `<li class="list-group-item">
                        <a href="#" class="text-decoration-none">
                            <p class="text-black fw-bold mt-3 text-truncate">글 제목 ${counter++}</p>
                            <div class="clearfix text-secondary">
                                <span class="float-start">writer</span>
                                <span class="float-end small">2024-10-28</span>
                            </div>
                        </a>
                    </li>`
                    }
                    $("ul").append(str);
                }

                // 스크롤바가 움직일 때마다 이벤트 호출
                $(window).scroll(function() {
                    console.log($(this).scrollTop(), $(this).height(), $(document).height());
                    const result = $(document).height() -  $(this).height() - 300;
                    if($(this).scrollTop() > result) {
                        $(".layer").removeClass("hide");
                        setTimeout(function() {
                            callList();
                            $(".layer").addClass("hide");
                        }, 1000);
                    }
                });
                callList();
            });
        </script>
    </head>
    <body>
        <div class="wrap container">
            <h3 class="my-3 text-center">my sns</h3>
            <ul class="list-group">
                <li class="list-group-item">
                    <a href="#" class="text-decoration-none">
                        <p class="text-black fw-bold mt-3 text-truncate">글 제목</p>
                        <div class="clearfix text-secondary">
                            <span class="float-start">writer</span>
                            <span class="float-end small">2024-10-28</span>
                        </div>
                    </a>
                </li>
            </ul>
            <div class="layer hide"></div>
        </div>
    </body>
</html>